(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a56f95b"],{"34a6":function(a,t,n){"use strict";var s=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"listbar"},[n("router-link",{attrs:{to:a.path||"#"}},[n("div",[a._v(a._s(a.lable))]),n("div",{staticClass:"tips"},[a._v(" "+a._s(a.tips)+" "),n("span",{staticClass:"iconfont iconjiantou1"})])])],1)},e=[],i={props:["lable","tips","path"]},o=i,r=(n("c9ac"),n("2877")),c=Object(r["a"])(o,s,e,!1,null,"41fc66c8",null);t["a"]=c.exports},"5c54":function(a,t,n){"use strict";var s=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"navigate-bar"},[n("span",{staticClass:"iconfont arrow iconjiantou2",on:{click:function(t){return a.$router.back()}}}),n("strong",[a._v(a._s(a.title))]),a.showHome?n("span",{staticClass:"iconfont iconshouye",on:{click:function(t){return a.$router.push("/")}}}):n("span")])},e=[],i={props:["title","showHome"]},o=i,r=(n("9d69"),n("2877")),c=Object(r["a"])(o,s,e,!1,null,"52701b31",null);t["a"]=c.exports},"9d69":function(a,t,n){"use strict";var s=n("daf0"),e=n.n(s);e.a},b0ad:function(a,t,n){},c4f3:function(a,t,n){"use strict";var s=n("b0ad"),e=n.n(s);e.a},c9ac:function(a,t,n){"use strict";var s=n("f7a5"),e=n.n(s);e.a},daf0:function(a,t,n){},f7a5:function(a,t,n){},fb5e:function(a,t,n){"use strict";n.r(t);var s=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",[n("Navigatebar",{attrs:{title:"个人中心"}}),n("div",{staticClass:"avatar"},[n("img",{attrs:{src:a.$axios.defaults.baseURL+a.userInfo.head_img,alt:""}}),n("van-uploader",{staticClass:"upload",attrs:{"after-read":a.afterRead}})],1),n("Listbar",{attrs:{lable:"昵称",tips:a.userInfo.nickname},nativeOn:{click:function(t){a.show=!0}}}),n("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:a.handleChangeNiname},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[n("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:a.nickname,callback:function(t){a.nickname=t},expression:"nickname"}})],1),n("Listbar",{attrs:{lable:"密码",tips:"******"},nativeOn:{click:function(t){a.showpwd=!0}}}),n("van-dialog",{attrs:{title:"修改密码","show-cancel-button":""},on:{confirm:a.handleChangePassword},model:{value:a.showpwd,callback:function(t){a.showpwd=t},expression:"showpwd"}},[n("van-field",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:a.password,callback:function(t){a.password=t},expression:"password"}})],1),n("Listbar",{attrs:{lable:"性别",tips:["女","男"][a.userInfo.gender]},nativeOn:{click:function(t){a.showGender=!0}}}),n("van-action-sheet",{attrs:{"close-on-click-action":"",actions:a.actions},on:{select:a.onSelect},model:{value:a.showGender,callback:function(t){a.showGender=t},expression:"showGender"}})],1)},e=[],i=n("34a6"),o=n("5c54"),r={data:function(){return{userInfo:{},userJson:{},show:!1,nickname:"",showpwd:!1,password:"",showGender:!1,actions:[{name:"男",value:1},{name:"女",value:0}]}},components:{Navigatebar:o["a"],Listbar:i["a"]},mounted:function(){var a=this,t=JSON.parse(localStorage.getItem("userInfo"));this.userJson=t,this.$axios({url:"/user/"+this.userJson.user.id,headers:{Authorization:this.userJson.token}}).then((function(t){var n=t.data.data;a.userInfo=n,a.nickname=n.nickname}))},methods:{afterRead:function(a){var t=this,n=new FormData;n.append("file",a.file),this.$axios({url:"/upload",method:"post",headers:{Authorization:this.userJson.token},data:n}).then((function(a){var n=a.data.data.url;t.userInfo.head_img=n,t.handEdit({head_img:n},"头像修改成功")}))},handEdit:function(a,t){var n=this;this.$axios({url:"/user_update/"+this.userInfo.id,method:"post",headers:{Authorization:this.userJson.token},data:a}).then((function(a){n.$toast.success(t)}))},handleChangeNiname:function(){this.handEdit({nickname:this.nickname},"昵称修改成功"),this.userInfo.nickname=this.nickname},handleChangePassword:function(){this.handEdit({password:this.password},"密码修改成功")},onSelect:function(a){this.handEdit({gender:a.value},"性别修改成功"),this.userInfo.gender=a.value}}},c=r,l=(n("c4f3"),n("2877")),u=Object(l["a"])(c,s,e,!1,null,"87f14f40",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-1a56f95b.2e8d49ba.js.map