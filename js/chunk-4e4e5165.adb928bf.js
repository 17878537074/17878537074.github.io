(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e4e5165"],{1854:function(e,t,i){},4155:function(e,t,i){"use strict";var a=i("1854"),o=i.n(a);o.a},"4de4":function(e,t,i){"use strict";var a=i("23e7"),o=i("b727").filter,s=i("1dde"),r=i("ae40"),n=s("filter"),c=r("filter");a({target:"Array",proto:!0,forced:!n||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"99af":function(e,t,i){"use strict";var a=i("23e7"),o=i("d039"),s=i("e8b5"),r=i("861d"),n=i("7b0b"),c=i("50c4"),l=i("8418"),d=i("65f0"),h=i("1dde"),g=i("b622"),f=i("2d00"),u=g("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",m=f>=51||!o((function(){var e=[];return e[u]=!1,e.concat()[0]!==e})),b=h("concat"),k=function(e){if(!r(e))return!1;var t=e[u];return void 0!==t?!!t:s(e)},y=!m||!b;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,i,a,o,s,r=n(this),h=d(r,0),g=0;for(t=-1,a=arguments.length;t<a;t++)if(s=-1===t?r:arguments[t],k(s)){if(o=c(s.length),g+o>v)throw TypeError(p);for(i=0;i<o;i++,g++)i in s&&l(h,g,s[i])}else{if(g>=v)throw TypeError(p);l(h,g++,s)}return h.length=g,h}})},d504:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"header"},[i("span",{staticClass:"iconfont iconnew"}),i("router-link",{staticClass:"search",attrs:{to:"/search"}},[i("span",{staticClass:"inconfont iconsearch"}),i("i",[e._v("搜索新闻")])]),i("router-link",{attrs:{to:"/personal"}},[i("span",{staticClass:"iconfont iconwode"})])],1),i("van-tabs",{attrs:{sticky:"",swipeable:""},on:{scroll:e.handelScroll},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.categories,(function(t,a){return 1===t.is_top||"V"===t.name?i("van-tab",{key:a,attrs:{title:t.name}},[i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:t.loading,callback:function(i){e.$set(t,"loading",i)},expression:"item.loading"}},e._l(e.categories[e.active].posts,(function(t,a){return i("div",{key:a},[1==t.type&&t.cover.length>0&&t.cover.length<3?i("PostItem",{attrs:{data:t}}):e._e(),1==t.type&&t.cover.length>=3?i("PostImages",{attrs:{data:t}}):e._e(),2==t.type?i("PostVideo",{attrs:{data:t}}):e._e()],1)})),0)],1)],1):e._e()})),1)],1)},o=[],s=(i("99af"),i("4de4"),i("d81d"),i("b0c0"),i("2909")),r=(i("3022"),i("f783")),n=i("8ad1"),c=i("fbbd"),l={name:"index",data:function(){return{categories:[],active:0,refreshing:!1,token:""}},watch:{active:function(){var e=this,t=this.categories.filter((function(e){return e.is_top||"V"===e.name}));this.active===t.length-1&&this.$router.push("/category"),this.getList(),setTimeout((function(){window.scrollTo(0,e.categories[e.active].scrollY)}),200)}},mounted:function(){this.reload()},components:{PostItem:r["a"],PostImages:n["a"],PostVideo:c["a"],refreshing:!1},methods:{reload:function(){var e=JSON.parse(localStorage.getItem("categories")),t=JSON.parse(localStorage.getItem("userInfo"))||{},i=t.token;if(this.token=i,e){if(e&&"关注"!==e[0].name&&i)return void this.getcategories(i);if(e&&!i&&"关注"===e[0].name)return void this.getcategories();this.categories=e,this.handercategories()}else this.getcategories(i)},handercategories:function(){this.categories=this.categories.map((function(e){return e.pageIndex=1,e.posts=[],e.scrollY=0,e.finished=!1,e.loading=!1,e.isload=!1,e})),this.getList()},getcategories:function(e){var t=this,i={url:"/category"};e&&(i.headers={Authorization:e}),this.$axios(i).then((function(e){var i=e.data.data;i.push({name:"V"}),t.categories=i,localStorage.setItem("categories",JSON.stringify(i)),t.handercategories()}))},getList:function(){var e=this,t=this.categories[this.active],i=t.pageIndex,a=t.id,o=t.name,r=t.isload;if(!r&&(this.categories[this.active].isload=!0,this.categories[this.active].pageIndex+=1,!this.categories[this.active].finished)){var n={url:"/post",params:{pageIndex:i,pageSize:5,category:a}};"关注"===o&&(n.headers={Authorization:this.token}),this.$axios(n).then((function(t){var i=t.data,a=i.data,o=i.total;e.categories[e.active].posts=[].concat(Object(s["a"])(e.categories[e.active].posts),Object(s["a"])(a)),e.categories=Object(s["a"])(e.categories),e.categories[e.active].loading=!1,e.categories[e.active].posts.length==o&&(e.categories[e.active].finished=!0,e.categories=Object(s["a"])(e.categories)),e.categories[e.active].isload=!1}))}},onLoad:function(){this.getList()},handelScroll:function(e){if(0!==this.categories.length){var t=e.scrollTop;this.categories[this.active].scrollY=t}},onRefresh:function(){this.refreshing=!1,console.log("正在下拉刷新")}},beforeRouteEnter:function(e,t,i){"/categroy"===t.path?i((function(e){e.active=0,e.reload()})):i()}},d=l,h=(i("4155"),i("2877")),g=Object(h["a"])(d,a,o,!1,null,"173a8123",null);t["default"]=g.exports},d81d:function(e,t,i){"use strict";var a=i("23e7"),o=i("b727").map,s=i("1dde"),r=i("ae40"),n=s("map"),c=r("map");a({target:"Array",proto:!0,forced:!n||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-4e4e5165.adb928bf.js.map